import{c as p}from"./chunk-YD56RY7D.js";import{a as u}from"./chunk-F4LPE2TG.js";import{Da as l,W as s,Z as n,da as a,oc as c}from"./chunk-QCNKWFM4.js";var U=class r{API_URL="https://reqres.in/api";TOKEN_KEY="token";USER_KEY="currentUser";currentUser=l(null);isLoggedIn=c(()=>!!this.currentUser());http=a(u);router=a(p);get currentUserValue(){return this.currentUser()}constructor(){this.loadUserFromStorage()}loadUserFromStorage(){let t=localStorage.getItem(this.USER_KEY);if(t)try{let e=JSON.parse(t);this.currentUser.set(e)}catch{this.clearUserData()}}clearUserData(){localStorage.removeItem(this.USER_KEY),localStorage.removeItem(this.TOKEN_KEY),this.currentUser.set(null)}login(t,e){return this.http.post(`${this.API_URL}/login`,{email:t,password:e}).pipe(s(o=>{if(o.token){let i={email:t,token:o.token};localStorage.setItem(this.USER_KEY,JSON.stringify(i)),localStorage.setItem(this.TOKEN_KEY,o.token),this.currentUser.set(i)}}))}logout(){this.clearUserData(),this.router.navigate(["/login"])}isAuthenticated(){return!!this.currentUserValue}static \u0275fac=function(e){return new(e||r)};static \u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})};export{U as a};
