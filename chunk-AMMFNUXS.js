import{a as D,b as U,c as B,d as R,f as V}from"./chunk-RDKCA32H.js";import{a as k,b as A}from"./chunk-MFIWVRGZ.js";import{a as L,b as N,e as q,f as T}from"./chunk-AEEIGACN.js";import{a as P,b as c,d as F,e as S,h as y,i as w,j as O,k as x,m as E}from"./chunk-3NQWQBWX.js";import{a as b}from"./chunk-H53HZZRJ.js";import{a as j}from"./chunk-64A77NMG.js";import{e as v,g as h}from"./chunk-QDXBKSBD.js";import{V as G,X as I}from"./chunk-CDQXF2FM.js";import{Eb as d,Ib as r,Jb as i,Kb as C,Rb as _,bb as s,bc as a,da as m,nb as M,sb as g,zb as f}from"./chunk-EERKQ2IA.js";function $(o,n){o&1&&(r(0,"mat-error"),a(1," Email is required "),i())}function z(o,n){o&1&&(r(0,"mat-error"),a(1," Please enter a valid email "),i())}function J(o,n){o&1&&(r(0,"mat-error"),a(1," Password is required "),i())}var H=class o{fb=m(x);authService=m(b);router=m(h);route=m(v);notificationService=m(j);redirectUrl=null;loginForm;constructor(){this.loginForm=this.fb.group({email:["",[c.required,c.email]],password:["",c.required]}),this.route.queryParams.subscribe(n=>{this.redirectUrl=n.redirectUrl||"/dashboard"})}onSubmit(){if(this.loginForm.valid){let{email:n,password:l}=this.loginForm.value;this.authService.login(n,l).subscribe({next:()=>{this.notificationService.success("Login successful"),this.router.navigateByUrl(this.redirectUrl||"/")},error:e=>{let t="Login failed. Please try again.";if(e.error?.error)switch(e.error.error){case"user not found":t="Invalid email or password";break;case"Missing password":t="Password is required";break;case"Missing email":t="Email is required";break;default:t=`Authentication failed: ${e.error.error}`}this.notificationService.error(t),this.loginForm.get("email")?.markAsTouched(),this.loginForm.get("password")?.markAsTouched()}})}}static \u0275fac=function(l){return new(l||o)};static \u0275cmp=M({type:o,selectors:[["app-login"]],decls:20,vars:5,consts:[[1,"login-container"],[3,"ngSubmit","formGroup"],["appearance","outline"],["matInput","","formControlName","email","type","email"],["matInput","","formControlName","password","type","password"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(l,e){if(l&1&&(r(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),a(4,"Login"),i()(),r(5,"mat-card-content")(6,"form",1),_("ngSubmit",function(){return e.onSubmit()}),r(7,"mat-form-field",2)(8,"mat-label"),a(9,"Email"),i(),C(10,"input",3),g(11,$,2,0,"mat-error")(12,z,2,0,"mat-error"),i(),r(13,"mat-form-field",2)(14,"mat-label"),a(15,"Password"),i(),C(16,"input",4),g(17,J,2,0,"mat-error"),i(),r(18,"button",5),a(19," Login "),i()()()()()),l&2){let t,u,p;s(6),f("formGroup",e.loginForm),s(5),d(!((t=e.loginForm.get("email"))==null||t.errors==null)&&t.errors.required?11:-1),s(),d(!((u=e.loginForm.get("email"))==null||u.errors==null)&&u.errors.email?12:-1),s(5),d(!((p=e.loginForm.get("password"))==null||p.errors==null)&&p.errors.required?17:-1),s(),f("disabled",e.loginForm.invalid)}},dependencies:[E,y,P,F,S,w,O,T,q,L,N,A,k,I,G,V,D,B,R,U],styles:[".login-container[_ngcontent-%COMP%]{height:100vh;display:flex;justify-content:center;align-items:center;background-color:#f5f5f5}.login-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:2rem}.login-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:15px}.login-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.login-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.login-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}"]})};export{H as LoginComponent};
