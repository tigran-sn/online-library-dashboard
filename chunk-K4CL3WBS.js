import{a as u}from"./chunk-64A77NMG.js";import{a as f}from"./chunk-CDQXF2FM.js";import{C as o,Fa as l,W as i,Z as d,a as c,da as p}from"./chunk-EERKQ2IA.js";var h=class n{API_URL="https://reqres.in/api/users";notificationService=p(u);http=p(f);users=l([]);getUsers(){return this.http.get(`${this.API_URL}?page=1`).pipe(i(t=>this.users.set(t.data)))}createUser(t){return this.http.post(this.API_URL,t).pipe(i(e=>{this.users.update(r=>[...r,e]),this.notificationService.success(`User ${e.first_name} ${e.last_name} was successfully created`)}),o(e=>{throw this.notificationService.error("Failed to create user"),e}))}updateUser(t){return this.http.patch(`${this.API_URL}/${t.id}`,t).pipe(i(e=>{let r;this.users.update(s=>s.map(a=>a.id===e.id?(r=a,c(c({},a),e)):a)),r&&this.notificationService.success(`User ${r.first_name} ${r.last_name} was successfully updated`)}),o(e=>{throw this.notificationService.error("Failed to update user"),e}))}deleteUser(t){return this.http.delete(`${this.API_URL}/${t}`).pipe(i(()=>{let e;this.users.update(r=>(e=r.find(s=>s.id===t),r.filter(s=>s.id!==t))),e&&this.notificationService.success(`User ${e.first_name} ${e.last_name} was successfully deleted`)}),o(e=>{throw this.notificationService.error("Failed to delete user"),e}))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=d({token:n,factory:n.\u0275fac,providedIn:"root"})};export{h as a};
