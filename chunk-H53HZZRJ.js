import{g as U}from"./chunk-QDXBKSBD.js";import{a as u}from"./chunk-CDQXF2FM.js";import{Fa as l,W as a,Z as n,da as i,sc as c}from"./chunk-EERKQ2IA.js";var p=class r{API_URL="https://reqres.in/api";TOKEN_KEY="token";USER_KEY="currentUser";currentUser=l(null);isLoggedIn=c(()=>!!this.currentUser());http=i(u);router=i(U);get currentUserValue(){return this.currentUser()}constructor(){this.loadUserFromStorage()}loadUserFromStorage(){let t=localStorage.getItem(this.USER_KEY);if(t)try{let e=JSON.parse(t);this.currentUser.set(e)}catch{this.clearUserData()}}clearUserData(){localStorage.removeItem(this.USER_KEY),localStorage.removeItem(this.TOKEN_KEY),this.currentUser.set(null)}login(t,e){return this.http.post(`${this.API_URL}/login`,{email:t,password:e}).pipe(a(o=>{if(o.token){let s={email:t,token:o.token};localStorage.setItem(this.USER_KEY,JSON.stringify(s)),localStorage.setItem(this.TOKEN_KEY,o.token),this.currentUser.set(s)}}))}logout(){this.clearUserData(),this.router.navigate(["/login"])}isAuthenticated(){return!!this.currentUserValue}static \u0275fac=function(e){return new(e||r)};static \u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})};export{p as a};
